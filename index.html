<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/af246ff78f8e1721.css" as="style"/><link rel="stylesheet" href="/_next/static/css/af246ff78f8e1721.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js"></script><script src="/_next/static/chunks/webpack-f164db4954bac6ec.js" defer=""></script><script src="/_next/static/chunks/framework-5eea1a21a68cb00b.js" defer=""></script><script src="/_next/static/chunks/main-bfd2c0bca62d7673.js" defer=""></script><script src="/_next/static/chunks/pages/_app-3150fad2affca479.js" defer=""></script><script src="/_next/static/chunks/34-d6e0db317b4ebbbc.js" defer=""></script><script src="/_next/static/chunks/pages/index-124951f30b1d164c.js" defer=""></script><script src="/_next/static/t0yMVUPzgM0axwy1J5vyF/_buildManifest.js" defer=""></script><script src="/_next/static/t0yMVUPzgM0axwy1J5vyF/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="markdown-body"><h1><a href="https://github.com/runsascoded/react-data-table-hydration-bug">react-data-table-hydration-bug</a></h1>
<p>Repro of a <a href="https://react.dev/errors/418?invariant=418">hydration error</a> in <a href="https://github.com/jbetancur/react-data-table-component">react-data-table-component</a>&#x27;s <a href="https://github.com/jbetancur/react-data-table-component/blob/v7.6.2/src/DataTable/Pagination.tsx#L20-L30"><code>Pagination</code> element</a>.</p>
<p><a href="https://github.com/jbetancur/react-data-table-component/blob/v7.6.2/src/DataTable/Pagination.tsx#L98">When the client window width</a> is &lt; <a href="https://github.com/jbetancur/react-data-table-component/blob/v7.6.2/src/DataTable/media.ts">599px</a> or <code>undefined</code> (as during <a href="https://nextjs.org/docs/pages/building-your-application/rendering/server-side-rendering">SSR</a>), &quot;rows per page&quot; in the pagination footer <a href="https://github.com/jbetancur/react-data-table-component/blob/v7.6.2/src/DataTable/Pagination.tsx#L145-L151">is omitted</a>. This causes a hydration error whenever the client window width is ≥599, as it is omitted on the server but rendered on the client.</p>
<p><img src="error.gif" alt=""/></p>
<p><em>Hydration error iff <code>window.innerWidth &lt; 599</code></em></p>
<h2>Live demo</h2>
<p><a href="https://react-data-table-hydration-bug.runsascoded.com">react-data-table-hydration-bug.runsascoded.com</a> was built and deployed <a href="https://github.com/runsascoded/react-data-table-hydration-bug/actions">via GitHub Actions</a>, and the error is visible in the dev console:</p>
<p><img src="console-error.png" alt=""/></p>
<p><a href="https://github.com/runsascoded/react-data-table-hydration-bug/blob/main/pages/index.tsx">Page source</a>:</p>
<pre><code class="language-tsx">import DataTable from &quot;react-data-table-component&quot;;
import ReactMarkdown from &quot;react-markdown&quot;;
import fs from &quot;fs&quot;;

export function getStaticProps() {
  return { props: { readme: fs.readFileSync(&quot;README.md&quot;).toString() } }
}

const Index = ({ readme }: { readme: string }) =&gt;
    &lt;div className={&quot;markdown-body&quot;}&gt;
      &lt;ReactMarkdown&gt;{readme}&lt;/ReactMarkdown&gt;
      &lt;hr /&gt;
      &lt;DataTable
          columns={[ { name: &quot;Str&quot; }, { name: &quot;Num&quot; } ]}
          data={[ { Str: &quot;A&quot;, Num: 1 } ]}
          // This line causes a hydration error in the pagination footer &quot;nav&quot; element (iff the
          // browser window is ≥599px wide); commenting this line fixes it.
          pagination
      /&gt;
    &lt;/div&gt;

export default Index
</code></pre>
<p>The error in the dev console links to <a href="https://react.dev/errors/418?invariant=418">react#418</a>:</p>
<pre><code>Uncaught Error: Minified React error #418; visit https://reactjs.org/docs/error-decoder.html?invariant=418 for the full message or use the non-minified dev environment for full errors and additional helpful warnings.
    at lg (framework-5eea1a21a68cb00b.js:9:46336)
    at i (framework-5eea1a21a68cb00b.js:9:121103)
    at oD (framework-5eea1a21a68cb00b.js:9:99070)
    at framework-5eea1a21a68cb00b.js:9:98937
    at oO (framework-5eea1a21a68cb00b.js:9:98944)
    at ox (framework-5eea1a21a68cb00b.js:9:93983)
    at x (framework-5eea1a21a68cb00b.js:33:1364)
    at MessagePort.T (framework-5eea1a21a68cb00b.js:33:1894)
</code></pre>
<h2>Local repro</h2>
<p>Local dev mode gives more details about the error (namely that it occurs in a hierarchy like <code>&lt;nav&gt;…&lt;span&gt;</code> in <a href="https://github.com/jbetancur/react-data-table-component/blob/v7.6.2/src/DataTable/Pagination.tsx#L20-L30">the pagination footer</a>):</p>
<pre><code class="language-bash">git clone https://github.com/ryan-williams/react-data-table-hydration-bug &amp;&amp; cd react-data-table-hydration-bug
pnpm install
npm run dev
</code></pre>
<p><a href="http://localhost:3000">localhost:3000</a> will show something like:</p>
<p><img src="hydration-error.png" alt=""/></p>
<p>Error text:</p>
<pre><code>Unhandled Runtime Error
Error: Hydration failed because the initial UI does not match what was rendered on the server.
See more info here: https://nextjs.org/docs/messages/react-hydration-error

Expected server HTML to contain a matching &lt;span&gt; in &lt;nav&gt;.

...
  &lt;O&gt;
    &lt;nav&gt;
    ^^^^^
      &lt;O&gt;
        &lt;span&gt;
        ^^^^^^
</code></pre>
<p>Commenting out <a href="https://github.com/runsascoded/react-data-table-hydration-bug/blob/main/pages/index.tsx#L17">the <code>pagination</code> property</a> avoids the issue; <a href="https://github.com/jbetancur/react-data-table-component/issues/649">react-data-table-component#649</a> and <a href="https://stackoverflow.com/q/75068071">this StackOverflow</a> describe the same.</p><hr/><div class="sc-dmXWDj hlbvEC"><div class="sc-fLseNd igTRoD"><div class="sc-beySPh losPks rdt_Table" role="table"><div class="sc-guDLey hrfSzQ rdt_TableHead" role="rowgroup"><div class="sc-dmyCSP fwQJth rdt_TableHeadRow" role="row"><div data-column-id="1" class="sc-hLQSwg sc-eDLKkx sc-irLvIq kjRCbu gfKXFa kAwGKS rdt_TableCol"><div data-column-id="1" data-sort-id="1" role="columnheader" tabindex="0" class="sc-csKJxZ cAGMGL rdt_TableCol_Sortable" disabled=""><div data-column-id="1" class="sc-eTNRI lnOUep">Str</div></div></div><div data-column-id="2" class="sc-hLQSwg sc-eDLKkx sc-irLvIq kjRCbu gfKXFa kAwGKS rdt_TableCol"><div data-column-id="2" data-sort-id="2" role="columnheader" tabindex="0" class="sc-csKJxZ cAGMGL rdt_TableCol_Sortable" disabled=""><div data-column-id="2" class="sc-eTNRI lnOUep">Num</div></div></div></div></div><div class="sc-hIPBNq eXWrwD rdt_TableBody" role="rowgroup"><div id="row-0" role="row" class="sc-jsEeTM itluUR rdt_TableRow"><div id="cell-1-undefined" data-column-id="1" role="cell" class="sc-hLQSwg sc-eDLKkx sc-jTQCzO kyDEvf gfKXFa cJTPDY rdt_TableCell" data-tag="allowRowEvents"><div data-tag="allowRowEvents"></div></div><div id="cell-2-undefined" data-column-id="2" role="cell" class="sc-hLQSwg sc-eDLKkx sc-jTQCzO kyDEvf gfKXFa cJTPDY rdt_TableCell" data-tag="allowRowEvents"><div data-tag="allowRowEvents"></div></div></div></div></div></div></div><div><nav class="sc-iKOmoZ bUaNdX rdt_Pagination"><div class="sc-eAKtBH jFQNY"><button id="pagination-first-page" type="button" aria-label="First Page" aria-disabled="true" disabled="" class="sc-gjLLEI dEgWir"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" aria-hidden="true" role="presentation"><path d="M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"></path><path fill="none" d="M24 24H0V0h24v24z"></path></svg></button><button id="pagination-previous-page" type="button" aria-label="Previous Page" aria-disabled="true" disabled="" class="sc-gjLLEI dEgWir"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" aria-hidden="true" role="presentation"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></button><div class="sc-lnsjTu epZUJV"><select aria-label="Rows per page:" class="sc-cyZbeP kUwhdZ"><option value="10" selected="">10</option><option value="15">15</option><option value="20">20</option><option value="25">25</option><option value="30">30</option></select><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></div><button id="pagination-next-page" type="button" aria-label="Next Page" aria-disabled="true" disabled="" class="sc-gjLLEI dEgWir"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" aria-hidden="true" role="presentation"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></button><button id="pagination-last-page" type="button" aria-label="Last Page" aria-disabled="true" disabled="" class="sc-gjLLEI dEgWir"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" aria-hidden="true" role="presentation"><path d="M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"></path><path fill="none" d="M0 0h24v24H0V0z"></path></svg></button></div></nav></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"readme":"# [react-data-table-hydration-bug]\nRepro of a [hydration error][react#418] in [react-data-table-component]'s [`Pagination` element][PaginationWrapper].\n\n[When the client window width][shouldShow] is \u003c [599px][`SMALL`] or `undefined` (as during [SSR]), \"rows per page\" in the pagination footer [is omitted][shouldShows]. This causes a hydration error whenever the client window width is ≥599, as it is omitted on the server but rendered on the client.\n\n![][error.gif]\n\n*Hydration error iff `window.innerWidth \u003c 599`*\n\n## Live demo\n[react-data-table-hydration-bug.runsascoded.com] was built and deployed [via GitHub Actions][GHA], and the error is visible in the dev console:\n\n![][console-error.png]\n\n[Page source][index.tsx]:\n\n```tsx\nimport DataTable from \"react-data-table-component\";\nimport ReactMarkdown from \"react-markdown\";\nimport fs from \"fs\";\n\nexport function getStaticProps() {\n  return { props: { readme: fs.readFileSync(\"README.md\").toString() } }\n}\n\nconst Index = ({ readme }: { readme: string }) =\u003e\n    \u003cdiv className={\"markdown-body\"}\u003e\n      \u003cReactMarkdown\u003e{readme}\u003c/ReactMarkdown\u003e\n      \u003chr /\u003e\n      \u003cDataTable\n          columns={[ { name: \"Str\" }, { name: \"Num\" } ]}\n          data={[ { Str: \"A\", Num: 1 } ]}\n          // This line causes a hydration error in the pagination footer \"nav\" element (iff the\n          // browser window is ≥599px wide); commenting this line fixes it.\n          pagination\n      /\u003e\n    \u003c/div\u003e\n\nexport default Index\n```\n\nThe error in the dev console links to [react#418]:\n```\nUncaught Error: Minified React error #418; visit https://reactjs.org/docs/error-decoder.html?invariant=418 for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\n    at lg (framework-5eea1a21a68cb00b.js:9:46336)\n    at i (framework-5eea1a21a68cb00b.js:9:121103)\n    at oD (framework-5eea1a21a68cb00b.js:9:99070)\n    at framework-5eea1a21a68cb00b.js:9:98937\n    at oO (framework-5eea1a21a68cb00b.js:9:98944)\n    at ox (framework-5eea1a21a68cb00b.js:9:93983)\n    at x (framework-5eea1a21a68cb00b.js:33:1364)\n    at MessagePort.T (framework-5eea1a21a68cb00b.js:33:1894)\n```\n\n## Local repro\nLocal dev mode gives more details about the error (namely that it occurs in a hierarchy like `\u003cnav\u003e…\u003cspan\u003e` in [the pagination footer][PaginationWrapper]):\n\n```bash\ngit clone https://github.com/ryan-williams/react-data-table-hydration-bug \u0026\u0026 cd react-data-table-hydration-bug\npnpm install\nnpm run dev\n```\n\n[localhost:3000] will show something like:\n\n![][hydration-error.png]\n\nError text:\n\n```\nUnhandled Runtime Error\nError: Hydration failed because the initial UI does not match what was rendered on the server.\nSee more info here: https://nextjs.org/docs/messages/react-hydration-error\n\nExpected server HTML to contain a matching \u003cspan\u003e in \u003cnav\u003e.\n\n...\n  \u003cO\u003e\n    \u003cnav\u003e\n    ^^^^^\n      \u003cO\u003e\n        \u003cspan\u003e\n        ^^^^^^\n```\n\nCommenting out [the `pagination` property] avoids the issue; [react-data-table-component#649] and [this StackOverflow][SO] describe the same.\n\n\n[react-data-table-component]: https://github.com/jbetancur/react-data-table-component\n[localhost:3000]: http://localhost:3000\n\n[react#418]: https://react.dev/errors/418?invariant=418\n\n[react-data-table-hydration-bug.runsascoded.com]: https://react-data-table-hydration-bug.runsascoded.com\n[GHA]: https://github.com/runsascoded/react-data-table-hydration-bug/actions\n[PaginationWrapper]: https://github.com/jbetancur/react-data-table-component/blob/v7.6.2/src/DataTable/Pagination.tsx#L20-L30\n\n[shouldShow]: https://github.com/jbetancur/react-data-table-component/blob/v7.6.2/src/DataTable/Pagination.tsx#L98\n[`SMALL`]: https://github.com/jbetancur/react-data-table-component/blob/v7.6.2/src/DataTable/media.ts\n[shouldShows]: https://github.com/jbetancur/react-data-table-component/blob/v7.6.2/src/DataTable/Pagination.tsx#L145-L151\n[SSR]: https://nextjs.org/docs/pages/building-your-application/rendering/server-side-rendering\n\n[SO]: https://stackoverflow.com/q/75068071\n[react-data-table-component#649]: https://github.com/jbetancur/react-data-table-component/issues/649\n\n[//]: # (gh repo links)\n[index.tsx]: https://github.com/runsascoded/react-data-table-hydration-bug/blob/main/pages/index.tsx\n[the `pagination` property]: https://github.com/runsascoded/react-data-table-hydration-bug/blob/main/pages/index.tsx#L17\n[react-data-table-hydration-bug]: https://github.com/runsascoded/react-data-table-hydration-bug\n\n[//]: # (images)\n[error.gif]: error.gif\n[console-error.png]: console-error.png\n[hydration-error.png]: hydration-error.png\n"},"__N_SSG":true},"page":"/","query":{},"buildId":"t0yMVUPzgM0axwy1J5vyF","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>